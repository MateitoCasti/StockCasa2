<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock Casa - Control Total</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 500px; margin: auto; background-color: #f9f9f9; }
    h1 { text-align: center; color: #333; }
    
    .formulario { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    input, select, button { width: 100%; padding: 10px; margin: 5px 0 15px 0; box-sizing: border-box; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
    
    button { background-color: #4CAF50; color: white; border: none; font-weight: bold; cursor: pointer; }
    button:active { transform: scale(0.98); }
    .btn-voz { background-color: #2196F3; }
    
    ul { list-style: none; padding: 0; max-height: 400px; overflow-y: auto; }
    li { background: white; margin-bottom: 10px; padding: 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    
    .controles { display: flex; gap: 5px; }
    .btn-cant { width: 35px; height: 35px; padding: 0; margin: 0; }
    .btn-borrar { background-color: #ff4d4d; width: 35px; height: 35px; padding: 0; margin: 0; }
    .cantidad-badge { background: #eee; padding: 2px 8px; border-radius: 4px; font-weight: bold; }
  </style>
</head>
<body>

  <h1>üì¶ Mi Stock</h1>

  <div class="formulario">
    <label>Producto:</label>
    <input type="text" id="producto" placeholder="Ej: Tomates">
    
    <label>Cantidad:</label>
    <input type="number" id="cantidad" placeholder="Ej: 2">
    
    <label>Categor√≠a:</label>
    <select id="categoria">
      <option value="Verduras">ü•ï Verduras</option>
      <option value="Frutas">üçé Frutas</option>
      <option value="Limpieza">üßΩ Limpieza</option>
      <option value="Almac√©n">üè† Almac√©n</option>
    </select>

    <button onclick="agregarProducto()">A√±adir a la lista</button>
    <button class="btn-voz" onclick="hablar()">üéôÔ∏è Cargar por Voz</button>
  </div>

  <h2>Lista de Stock</h2>
  <ul id="lista"></ul>

  <script>
    const lista = document.getElementById("lista");

    window.onload = function() {
      const guardado = localStorage.getItem("miStockPersonal");
      if (guardado) { lista.innerHTML = guardado; }
    };

    function guardar() {
      localStorage.setItem("miStockPersonal", lista.innerHTML);
    }

    function agregarProducto() {
      const prod = document.getElementById("producto").value;
      const cant = document.getElementById("cantidad").value;
      const cat = document.getElementById("categoria").value;

      if (prod === "" || cant === "") {
        alert("Escribe el nombre y la cantidad");
        return;
      }

      const item = document.createElement("li");
      item.innerHTML = `
        <div>
          <small>${cat}</small><br>
          <strong>${prod}</strong>: <span class="num">${cant}</span>
        </div>
        <div class="controles">
          <button class="btn-cant" onclick="cambiar(this, 1)">+</button>
          <button class="btn-cant" onclick="cambiar(this, -1)">-</button>
          <button class="btn-borrar" onclick="borrar(this)">‚ùå</button>
        </div>
      `;

      lista.appendChild(item);
      guardar();
      
      document.getElementById("producto").value = "";
      document.getElementById("cantidad").value = "";
    }

    function cambiar(btn, valor) {
      const li = btn.closest("li");
      const span = li.querySelector(".num");
      let actual = parseInt(span.innerText);
      let nuevo = actual + valor;
      if (nuevo < 0) nuevo = 0;
      span.innerText = nuevo;
      guardar();
    }

    function borrar(btn) {
      btn.closest("li").remove();
      guardar();
    }

    function hablar() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "es-AR";
      recognition.onresult = function(event) {
        const voz = event.results[0][0].transcript.toLowerCase();
        const partes = voz.split(" ");
        if (!isNaN(partes[0])) {
          document.getElementById("cantidad").value = partes[0];
          document.getElementById("producto").value = partes.slice(1).join(" ");
        } else {
          document.getElementById("cantidad").value = "1";
          document.getElementById("producto").value = voz;
        }
      };
      recognition.start();
    }
  </script>
</body>
</html>
